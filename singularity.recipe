Bootstrap: docker

From: osrf/ros:noetic-desktop-focal

%environment
  OUTPUT=/output
  export ROS_LOG_DIR=$OUTPUT
  export ROS_HOME=$OUTPUT

%files
  echo "\n\n\n====COPYING FILES====\n\n\n"
  agent /catkin_ws/src/grasp_refinement/agent 
  brain /catkin_ws/src/grasp_refinement/brain 
  reflex_stack /catkin_ws/src/grasp_refinement/reflex_stack 

%post
  apt-get -y update
  apt-get -y upgrade
  
  echo "\n\n\n====INSTALLING DART====\n\n\n"
  apt-get -y install software-properties-common
  apt-add-repository ppa:dartsim
  apt-get -y update
  apt-get -y install libdart6-dev
  apt-get -y install libdart6-utils-urdf-dev
  
  echo "\n\n\n====INSTALLING GAZEBO====\n\n\n"
  apt install -y curl
  curl -sSL http://get.gazebosim.org | sh

  # install project dependencies
  apt-get -y install ros-noetic-ros-control ros-noetic-ros-controllers
  apt-get -y install ros-noetic-gazebo-ros-pkgs ros-noetic-gazebo-ros-control

  echo "\n\n\n====BUILDING WORKSPACE====\n\n\n"
  cd /catkin_ws/src
  . /opt/ros/noetic/setup.sh
  catkin_init_workspace
  cd /catkin_ws
  catkin_make


  # apt-get -y install wget
  # apt-get -y install gnupg2
  # apt-get -y install lsb-release 
  
  # apt install -y git
  # git clone --recursive https://github.com/axkoenig/grasp_refinement.git
  # install gazebo 11 from source
#  git clone https://github.com/osrf/gazebo /tmp/gazebo
#  cd /tmp/gazebo
#  mkdir build
#  cd build
#  cmake ../
#  make -j4
#  make install 

%runscript
  echo "\n\n\n====RUNNING SIMULATION====\n\n\n"