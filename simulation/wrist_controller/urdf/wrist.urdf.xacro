<?xml version="1.0" ?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="reflex">

    <!-- translation properties -->
    <xacro:property name="translation_effort" value="1000"/>
    <xacro:property name="translation_velocity" value="25"/>
    <xacro:property name="translation_up_lim" value="5"/>
    <xacro:property name="translation_low_lim" value="-5"/>
    <xacro:property name="translation_damping" value="30"/>

    <!-- rotation properties -->
    <xacro:property name="rotation_effort" value="1000"/>
    <xacro:property name="rotation_velocity" value="25"/>
    <xacro:property name="rotation_damping" value="0"/>
    <xacro:property name="rotation_friction" value="0"/>

    <link name="base_footprint" />
    <!-- this all comes from grasp repo -->
    <!-- Virtual link world -->
    <link name="world"/>

    <!-- Translation -->
    <joint name="virtual_px_joint" type="prismatic">
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <axis xyz="1 0 0"/>
        <parent link="world"/>
        <child link="virtual_px_link"/>
        <limit effort="${translation_effort}" lower="${translation_low_lim}" upper="${translation_up_lim}" velocity="${translation_velocity}"/>
        <dynamics damping="${translation_damping}"/>
    </joint>
    <link name="virtual_px_link">
        <visual>
            <origin rpy="0 0 0" xyz="0 0 0"/>
            <geometry>
                <cylinder length="0.01" radius="0.005"/>
            </geometry>
        </visual>
        <inertial>
            <origin rpy="0 0 0" xyz="0 0 0"/>
            <mass value="1"/>
            <inertia ixx="0.01" ixy="0" ixz="0" iyy="0.01" iyz="0" izz="0.01"/>
        </inertial>
        <collision>
            <origin rpy="0 0 0" xyz="0.0 0.0 -20.0"/>
            <geometry>
                <cylinder length="0.001" radius="0.005"/>
            </geometry>
        </collision>
    </link>
    <joint name="virtual_py_joint" type="prismatic">
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <axis xyz="0 1 0"/>
        <parent link="virtual_px_link"/>
        <child link="virtual_py_link"/>
        <limit effort="${translation_effort}" lower="${translation_low_lim}" upper="${translation_up_lim}" velocity="${translation_velocity}"/>
        <dynamics damping="${translation_damping}"/>
    </joint>
    <link name="virtual_py_link">
        <visual>
            <origin rpy="0 0 0" xyz="0 0 0"/>
            <geometry>
                <cylinder length="0.01" radius="0.005"/>
            </geometry>
        </visual>
        <inertial>
            <origin rpy="0 0 0" xyz="0 0 0"/>
            <mass value="1"/>
            <inertia ixx="0.01" ixy="0" ixz="0" iyy="0.01" iyz="0" izz="0.01"/>
        </inertial>
        <collision>
            <origin rpy="0 0 0" xyz="0.0 0.0 -20.0"/>
            <geometry>
                <cylinder length="0.001" radius="0.005"/>
            </geometry>
        </collision>
    </link>
    <joint name="virtual_pz_joint" type="prismatic">
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <axis xyz="0 0 1"/>
        <parent link="virtual_py_link"/>
        <child link="virtual_pz_link"/>
        <limit effort="${translation_effort}" lower="${translation_low_lim}" upper="${translation_up_lim}" velocity="${translation_velocity}"/>
        <dynamics damping="${translation_damping}"/>
    </joint>
    <link name="virtual_pz_link">
        <visual>
            <origin rpy="0 0 0" xyz="0 0 0"/>
            <geometry>
                <cylinder length="0.01" radius="0.005"/>
            </geometry>
        </visual>
        <inertial>
            <origin rpy="0 0 0" xyz="0 0 0"/>
            <mass value="1"/>
            <inertia ixx="0.01" ixy="0" ixz="0" iyy="0.01" iyz="0" izz="0.01"/>
        </inertial>
        <collision>
            <origin rpy="0 0 0" xyz="0.0 0.0 -20.0"/>
            <geometry>
                <cylinder length="0.001" radius="0.005"/>
            </geometry>
        </collision>
    </link>

    <!-- Rotation -->
    <joint name="virtual_ry_joint" type="continuous">
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <axis xyz="0 0 1"/>
        <parent link="virtual_pz_link"/>
        <child link="virtual_ry_link"/>
        <limit effort="50.00" velocity="25.0"/>
        <dynamics damping="100.0" friction="5.0"/>
    </joint>
    <link name="virtual_ry_link">
        <visual>
            <origin rpy="0 0 0" xyz="0 0 0"/>
            <geometry>
                <cylinder length="0.01" radius="0.005"/>
            </geometry>
        </visual>
        <inertial>
            <origin rpy="0 0 0" xyz="0 0 0"/>
            <mass value="1"/>
            <inertia ixx="0.01" ixy="0" ixz="0" iyy="0.01" iyz="0" izz="0.01"/>
        </inertial>
        <collision>
            <origin rpy="0 0 0" xyz="0.0 0.0 -20.0"/>
            <geometry>
                <cylinder length="0.001" radius="0.005"/>
            </geometry>
        </collision>
    </link>
    <joint name="virtual_rp_joint" type="continuous">
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <axis xyz="0 1 0"/>
        <parent link="virtual_ry_link"/>
        <child link="virtual_rp_link"/>
        <limit effort="${rotation_effort}" velocity="${rotation_velocity}"/>
        <dynamics damping="${rotation_damping}" friction="${rotation_friction}"/>
    </joint>
    <link name="virtual_rp_link">
        <visual>
            <origin rpy="0 0 0" xyz="0 0 0"/>
            <geometry>
                <cylinder length="0.01" radius="0.005"/>
            </geometry>
        </visual>
        <inertial>
            <origin rpy="0 0 0" xyz="0 0 0"/>
            <mass value="1"/>
            <inertia ixx="0.01" ixy="0" ixz="0" iyy="0.01" iyz="0" izz="0.01"/>
        </inertial>
        <collision>
            <origin rpy="0 0 0" xyz="0.0 0.0 -20.0"/>
            <geometry>
                <cylinder length="0.001" radius="0.005"/>
            </geometry>
        </collision>
    </link>
    <joint name="virtual_rr_joint" type="continuous">
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <axis xyz="1 0 0"/>
        <parent link="virtual_rp_link"/>
        <child link="base_footprint"/>
        <limit effort="${rotation_effort}" velocity="${rotation_velocity}"/>
        <dynamics damping="${rotation_damping}" friction="${rotation_friction}"/>
    </joint>

    <!-- if you want to use this package with other robot hands, simply replace the "shell" link with the base link of your robot hand -->

    <joint name="base_to_shell_joint" type="fixed">
        <parent link="base_footprint" />
        <child link = "shell" />
    </joint>

    <!-- transmissions -->
    <xacro:include filename="$(find wrist_controller)/urdf/wrist.transmissions.xacro"/>

</robot>